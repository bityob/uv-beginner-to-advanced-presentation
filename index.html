<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title></title>
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/serif.css" id="theme" />
    <link rel="stylesheet" href="plugin/highlight/zenburn.css" />
	<link rel="stylesheet" href="css/layout.css" />
	<link rel="stylesheet" href="plugin/customcontrols/style.css">



    <script defer src="dist/fontawesome/all.min.js"></script>

	<script type="text/javascript">
		var forgetPop = true;
		function onPopState(event) {
			if(forgetPop){
				forgetPop = false;
			} else {
				parent.postMessage(event.target.location.href, "app://obsidian.md");
			}
        }
		window.onpopstate = onPopState;
		window.onmessage = event => {
			if(event.data == "reload"){
				window.document.location.reload();
			}
			forgetPop = true;
		}

		function fitElements(){
			const itemsToFit = document.getElementsByClassName('fitText');
			for (const item in itemsToFit) {
				if (Object.hasOwnProperty.call(itemsToFit, item)) {
					var element = itemsToFit[item];
					fitElement(element,1, 1000);
					element.classList.remove('fitText');
				}
			}
		}

		function fitElement(element, start, end){

			let size = (end + start) / 2;
			element.style.fontSize = `${size}px`;

			if(Math.abs(start - end) < 1){
				while(element.scrollHeight > element.offsetHeight){
					size--;
					element.style.fontSize = `${size}px`;
				}
				return;
			}

			if(element.scrollHeight > element.offsetHeight){
				fitElement(element, start, size);
			} else {
				fitElement(element, size, end);
			}		
		}


		document.onreadystatechange = () => {
			fitElements();
			if (document.readyState === 'complete') {
				if (window.location.href.indexOf("?export") != -1){
					parent.postMessage(event.target.location.href, "app://obsidian.md");
				}
				if (window.location.href.indexOf("print-pdf") != -1){
					let stateCheck = setInterval(() => {
						clearInterval(stateCheck);
						window.print();
					}, 250);
				}
			}
	};


        </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

## uv: Speed Meets Simplicity in Python Package Management

**PyWeb-IL Meetup**, March 2025

[bit.ly/uv-intro](https://bit.ly/uv-intro)

<div class="" style="position: absolute; left: 0%; top: 70%; height: 30%; width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

Yonatan Bitton [@bityob](https://linktr.ee/bityob)
</div>

<div class="" style="position: absolute; left: 60%; top: 70%; height: 30%; width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<img src="uv-beginner-to-advanced-presentation-images/Pasted image 20241224201606.png" alt="" style="width: 150px; object-fit: fill">

</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `whoami`

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Developer on the Core team at **Perception Point**, recently acquired by **Fortinet**
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->We provide cybersecurity protection for emails and more
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->Passionate about **Python**, enjoy solving tough **challenges** and understanding things **inside out**
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Agenda

- What’s Wrong with Python Packaging?
- Meet `uv`
- Getting Started (Install, Commands, Features)
- The `uv` Ecosystem (Scripts & Tools)
- Why is `uv` So Fast?
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### The Painful Past of Python Packaging

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Python packaging can be hard for beginners:
    - Bootstrapping, i.e., how to even get started!
    - Activation, i.e., how do virtual environments (venvs) in Python work?
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->Managing Python versions
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->No unified tool for all workflows
- &shy;<!-- .element: class="fragment" data-fragment-index="4" -->pip is very, very slow
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Meet **uv**

An **extremely fast** Python package and project manager, built with the power of **Rust**.
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### A fast, all-in-one Python package manager

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->You can use `uv` to: install Python, create virtual environments, resolve dependencies, install packages, build packages and more
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->A drop-in alternative to `pip`, `pipx`, `pyenv`, `virtualenv`, `poetry` and more
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->A single static binary that gives you everything you need to be productive with Python
- &shy;<!-- .element: class="fragment" data-fragment-index="4" -->10-100x faster than alternatives
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### New Tool, Big Impact

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->29+ million downloads last month
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->44.4k stars in GitHub
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->6.9+ billion packages were downloaded using `uv` last month, which is 13% of total downloads

Notes:
- uv downloads last month: https://pypistats.org/packages/uv
- uv github stars: https://github.com/astral-sh/uv
- google biqquery with pypi data: https://console.cloud.google.com/marketplace/product/gcp-public-data-pypi/pypi?pli=1&project=learned-pier-349616&inv=1&invt=AbsNeg

```sql
SELECT details.installer.name, count(*) as count
FROM `bigquery-public-data.pypi.file_downloads` 
WHERE timestamp >= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 30 DAY)
group by details.installer.name
order by count desc
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="uv-beginner-to-advanced-presentation-images/Pasted image 20250316220111 1.png" alt="" style="object-fit: scale-down">
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Getting Started
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Installation 

- No need to have Python/Rust installed to install `uv`

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

```powershell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

- Alternatively, can be installed using `pip` or `pipx`

```bash
pip install uv
pipx install uv
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### `pip` interface

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Drop-in replacement for common `pip` and `virtualenv` commands
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->For legacy workflows or when high-level commands lack control
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->Creating a virtual environment: `uv venv`
- &shy;<!-- .element: class="fragment" data-fragment-index="4" -->Install a package: `uv pip install flask`
- &shy;<!-- .element: class="fragment" data-fragment-index="5" -->List packages: `uv pip freeze`
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

```python [1-4|5-14|15-22]
$ uv venv
Using CPython 3.10.14
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
$ uv pip install flask
Resolved 7 packages in 491ms
Installed 7 packages in 13ms
 + blinker==1.9.0
 + click==8.1.8
 + flask==3.1.0
 + itsdangerous==2.2.0
 + jinja2==3.1.5
 + markupsafe==3.0.2
 + werkzeug==3.1.3
$ uv pip freeze
blinker==1.9.0
click==8.1.8
flask==3.1.0
itsdangerous==2.2.0
jinja2==3.1.5
markupsafe==3.0.2
werkzeug==3.1.3
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Python Versions               |                                              |
| ----------------------------- | -------------------------------------------- |
| `uv python list`              | View available and installed Python versions |
| `uv python install <version>` | Install python using precompiled binaries    |

Notes:

| `uv python pin <version>` | Pin the current project to use a specific Python version |
| ------------------------- | -------------------------------------------------------- |
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--<div style="width: 150%; font-size: 150%"> -->

```python [1-10|11-13]
$ uv python list
cpython-3.14.0a5-linux-x86_64-gnu      <download available>
cpython-3.13.2-linux-x86_64-gnu        /home/bit/.local/share/uv/python/cpython-3.13.2-linux-x86_64-gnu/bin/python3.13
cpython-3.12.9-linux-x86_64-gnu        /home/linuxbrew/.linuxbrew/opt/python@3.12/bin/python3.12
cpython-3.11.11-linux-x86_64-gnu       /home/bit/.local/share/uv/python/cpython-3.11.11-linux-x86_64-gnu/bin/python3.11
cpython-3.10.16-linux-x86_64-gnu       <download available>
cpython-3.10.15-linux-x86_64-gnu       /home/bit/.local/bin/python3.10 -> /home/bit/.local/share/uv/python/cpython-3.10.15-linux-x86_64-gnu/bin/python3.10
cpython-3.10.12-linux-x86_64-gnu       /bin/python3 -> python3.10
cpython-3.9.21-linux-x86_64-gnu        /usr/bin/python3.9
...
$ uv python install cpython-3.10.15-linux-x86_64-gnu
Installed Python 3.10.15 in 4.74s
 + cpython-3.10.15-linux-x86_64-gnu
```

<!--</div>-->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Projects               |                                                                                                           |
| ---------------------- | --------------------------------------------------------------------------------------------------------- |
| `uv init <name>`       | Create a new project with `pyproject.toml`, `src/` tree, `README.md`, etc.                                |
| `uv run <python_file>` | Run the python file inside the `venv`. `uv` downloads python if not exists and sync the `venv` before run |
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

```python [1-2|3-10|11-14|15-25|24-25]
$ uv init
Initialized project `playground`
$ cat pyproject.toml
[project]
name = "playground"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.10"
dependencies = []
$ uv run main.py
Using CPython 3.10.15
Creating virtual environment at: .venv
Hello from playground!
$ tree
├── .python-version
├── .venv
│   ├── bin
│   │   ├── activate
│   │   ├── python3 -> python
│   ├── lib
├── README.md
├── main.py
├── pyproject.toml
└── uv.lock
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

- `pyproject.toml` file contains metadata about your project
- `uv.lock` file records exact dependency versions for reproducible installations, unlike `pyproject.toml`, which specifies broad requirements
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Projects           |                                                                                                            |
| ------------------ | ---------------------------------------------------------------------------------------------------------- |
| `uv add <package>` | Install the package in the `venv`. `uv` also adds it to the `pyproject.toml` and update the `uv.lock` file |


Notes:
- When the environment runs inside Docker, you can't run `uv add <package>` on local, since it will try to **install the packages too.**
- For such cases, just run with `--no-sync` flag
```
uv add <package> --no-sync
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Projects  |                                                        |
| --------- | ------------------------------------------------------ |
| `uv lock` | Create the `uv.lock` file with all pinned dependencies |
| `uv sync` | Install all project's dependencies inside the `venv`   |

Notes:
- Not need to run usually, `uv add` / `uv run` already handles this. Use it when you want more control
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--<div style="width: 150%; font-size: 150%"> -->

```python [1-4|5-13]
$ uv add pycowsay
Resolved 2 packages in 346ms
Installed 1 package in 7ms
 ++ pycowsay==0.0.0.2
$ uv run pycowsay "Hello Python World!"
  -------------------
< Hello Python World! >
  -------------------
   \   ^__^
    \  (oo)\_______
       (__)\       )\/\
           ||----w |
           ||     ||
```

<!--</div>-->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Tools

- CLI tools, e.g `mypy`, `llm`, `pre-commit`
- No `pyproect.toml` file needed
- Virtual environment included
- Same like `pipx` tool
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

| Tools                 |                                       |
| --------------------- | ------------------------------------- |
| `uvx` / `uv tool run` | Run a tool in a temporary environment |
| `uv tool install`     | Install a tool user-wide              |
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

```python
$ uvx art text "Hello World!"
 _   _        _  _         __        __              _      _  _
| | | |  ___ | || |  ___   \ \      / /  ___   _ __ | |  __| || |
| |_| | / _ \| || | / _ \   \ \ /\ / /  / _ \ | '__|| | / _` || |
|  _  ||  __/| || || (_) |   \ V  V /  | (_) || |   | || (_| ||_|
|_| |_| \___||_||_| \___/     \_/\_/    \___/ |_|   |_| \__,_|(_)
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

```python [1-5|6-12]
$ uv tool install ipython
Resolved 16 packages in 9ms
Installed 16 packages in 164ms
...
Installed 2 executables: ipython, ipython3
$ ipython
Python 3.13.2 (main, Feb 12 2025, 14:51:17) [Clang 19.1.6 ]
Type 'copyright', 'credits' or 'license' for more information
IPython 9.0.2 -- An enhanced Interactive Python. Type '?' for help.
Tip: You can change the editing mode of IPython to behave more like vi, or emacs.

In [1]:
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Real-world examples of advanced usage
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Install Python kernels in Jupyter Notebooks for all versions

```python
for i in {10..14}; \
	do uvx --python 3.$i --with ipykernel \
	python -m ipykernel install --user \
	--name python3.$i \
	--display-name python3.$i; \
done
```

```python
Installed kernelspec python3.10 in .../jupyter/kernels/python3.10
Installed kernelspec python3.11 in .../jupyter/kernels/python3.11
Installed kernelspec python3.12 in .../jupyter/kernels/python3.12
Installed kernelspec python3.13 in .../jupyter/kernels/python3.13
Installed kernelspec python3.14 in .../jupyter/kernels/python3.14
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Finding when a Python behavior changed

```python
for i in {9..12}; \
	do uvx --python 3.$i \
	python -c 'import sys; \
	print(sys.version); \
	from urllib.parse import urlunsplit; \
	print(urlunsplit(("http", "", "google.com", "","")))'; \
done
```


```python
3.9.21 (main, Dec  4 2024, 08:53:33) [GCC 11.4.0]
http:///google.com
3.10.15 (main, Oct 16 2024, 04:37:23) [Clang 18.1.8 ]
http:///google.com
3.11.11 (main, Dec 19 2024, 14:33:27) [Clang 18.1.8 ]
http:///google.com
3.12.9 (main, Feb 12 2025, 14:50:50) [Clang 19.1.6 ]
http:google.com
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Scripts

- Scripts are single files without project files
- A script without dependencies is easy, just `uv run script` 
- But how can we run a script with dependencies??
- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->uv supports specifying dependencies **on invocation**
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--<div style="width: 150%; font-size: 150%"> -->

```python [1-4|5-9|10-12]
$ cat requests_example.py
import requests
uuid = requests.get("https://httpbin.org/uuid").json()
print(uuid)
$ uv run requests_example.py
Traceback (most recent call last):
  File "/requests_example.py", line 1, in <module>
    import requests
ModuleNotFoundError: No module named 'requests'
$ uv run --with requests requests_example.py
Installed 5 packages in 42ms
{'uuid': 'f0769a81-9c86-4187-aa3f-a9178bca216f'}
```

<!--</div>-->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

But this can be done even better
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="uv-beginner-to-advanced-presentation-images/Pasted image 20241223185623.png" alt="" style="object-fit: scale-down">


<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://peps.python.org/pep-0723/">Source: https://peps.python.org/pep-0723/</a>
</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Now we can use something like this 

<!--<div style="width: 150%; font-size: 150%"> -->

```python [1-2|3-12|13-15]
$ uv add --script requests_example.py requests
Updated `requests_example.py`
$ cat requests_example.py
# /// script
# requires-python = ">=3.10"
# dependencies = [
#     "requests",
# ]
# ///
import requests
uuid = requests.get("https://httpbin.org/uuid").json()
print(uuid)
$ uv run requests_example.py
Installed 5 packages in 51ms
{'uuid': '373e6644-b7ae-434e-a15e-0135774d05bf'}
```

<!--</div>-->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" data-visibility="hidden" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--  Bonus  -->


We can also limit `uv` to distributions available when the script was created

<!--<div style="width: 150%; font-size: 150%"> -->

```python [7|13-15]
$ cat requests_version.py
# /// script
# dependencies = [
#   "requests",
# ]
# [tool.uv]
# exclude-newer = "2020-10-16T00:00:00Z"
# ///
import requests
print(requests.__version__)
$ uv run requests_version.py
Reading inline script metadata from `example_requests.py`
Installed 5 packages in 40ms
2.24.0
```

<!--</div>-->

<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://docs.astral.sh/uv/guides/scripts/">Source: https://docs.astral.sh/uv/guides/scripts/</a>
</div><!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Now, the interesting part...

### Why uv is so fast?<!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" data-visibility="hidden" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--  Bonus  -->


### Pure Rust

Written in pure **Rust**, 100k~ lines of code.

Notes:
- But... uv has gotten significantly faster over time
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" data-visibility="hidden" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--  Bonus  -->


Fast python install using precompiled binaries.

<img src="attachments/Pasted image 20250323232516.png" alt="" style="object-fit: scale-down">



<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://github.com/astral-sh/python-build-standalone/releases/tag/20250317">https://github.com/astral-sh/python-build-standalone/releases/tag/20250317</a>
</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Version parsing

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->`1.0.0`
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->`2.3.1-beta.1`
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->`1.0.post345`
- &shy;<!-- .element: class="fragment" data-fragment-index="4" -->`1.2.3.4.5-a8.post9`
- &shy;<!-- .element: class="fragment" data-fragment-index="5" -->`2025.3.24.pre123`

Representing these is pretty hard. <!-- .element: class="fragment" -->

<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://youtu.be/gSKTfG1GXYQ?t=1544">Source: https://youtu.be/gSKTfG1GXYQ?t=1544</a>
</div><!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

The full representation of this is

```rust
struct VersionFull {
    epoch: u64,
    release: Vec<u64>,
    pre: Option<Prerelease>,
    post: Option<u64>,
    dev: Option<u64>,
    local: LocalVersion,
    min: Option<u64>,
    max: Option<u64>,
}
```

Note, the `release` is a vector...

Notes:
- Vectors, memory allocation, release segments,
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

We can represent over 90% of versions with only 64 bits, making it extremely space-efficient. 

```rust
struct VersionSmall(u64);
```




<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
Credit to Andrew Gallant (@BurntSushi)
</div><!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="attachments/Pasted image 20250324005518.png" alt="" style="object-fit: scale-down">
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="attachments/Pasted image 20250324005841.png" alt="" style="object-fit: scale-down">
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### And the best part

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Greater versions map to larger integers 
	→ Simplifies comparison
- &shy;<!-- .element: class="fragment" data-fragment-index="2" --> Version comparison becomes extremely fast
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->`1.2.3a1` < `1.2.3`

```
1.2.3a1  →  0001 | 0002 | 0003 | *0010* | 0000 | 0001  (Alpha = 2)
1.2.3    →  0001 | 0002 | 0003 | *0101* | 0000 | 0000  (Normal = 5)
```
<!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Reading package `METADATA`

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Built distributions (wheels) are packaged as ZIP archives
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->Somewhere within the ZIP file, there's a `METADATA` file
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->Some registries expose the `METADATA` file directly, while others do not

<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://youtu.be/gSKTfG1GXYQ?t=1884">Source: https://youtu.be/gSKTfG1GXYQ?t=1884</a>
</div><!-- .element: class="fragment" -->

<aside class="notes"><ul>
<li>&shy;<!-- .element: class="fragment" data-fragment-index="4" -->In such cases, we may need to run Python code to determine the package dependencies 🙁</div></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

How to avoid downloading the entire ZIP archive just to read the `METADATA` file and determine package dependencies?
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="uv-beginner-to-advanced-presentation-images/Pasted image 20241224013805.png" alt="" style="object-fit: scale-down">



<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://en.wikipedia.org/wiki/ZIP_(file_format)">Source: Wikipedia</a>
</div><!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

- HTTP Range request the Central Directory
- Locate the `METADATA` file by reading the Central Directory
- HTTP Range request the `METADATA` file

```http
GET /example.whl HTTP/1.1
Host: pypi.com
Range: bytes=-100

GET /example.whl HTTP/1.1
Host: pypi.com
Range: bytes=300-400
```
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Cache design

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->Global cache of unpacked archives
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->Most installs are just **hardlinks** from one place to another
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->Really fast and very space efficient

<aside class="notes"><ul>
<li><strong>Global cache of unpacked archives:</strong> uv uses aggressive caching to avoid re-downloading (and re-building) dependencies that have already been accessed in prior runs</li>
<li><strong>Most installs are just:</strong> hardlink a bunch of files from one place to another</li>
<li>Really fast and very space efficient</li>
<li>This only applies for files, not for metadata</div></li>
</ul>
</aside></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" data-visibility="hidden" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--  Bonus  -->


For metadata, there is another **last** hack called,

**Zero-copy deserialization.**
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Zero-copy deserialization

A technique that reduces the time and memory required to access and use data by **directly referencing bytes in the serialized form**


<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://rkyv.org/zero-copy-deserialization.html">Source: https://rkyv.org/zero-copy-deserialization.html</a>
</div><!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<img src="attachments/Pasted image 20250324014805.png" alt="" style="object-fit: scale-down">



<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://www.sobyte.net/post/2022-11/zero-copy/">Source: https://www.sobyte.net/post/2022-11/zero-copy/</a>
</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

On `uv`, metadata is stored on disk in the same format as its in-memory JSON representation. This allows you to simply read it from the disk without needing to reparse it or allocate additional memory.

<div style="position: fixed; bottom: 0; width: 100%; text-align: center; font-size: 70%; color: gray;">
<a href="https://youtu.be/gSKTfG1GXYQ?t=2246">Source: https://youtu.be/gSKTfG1GXYQ?t=2246</a>
</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Simple zero-copy

```rust
{ "quote": "I don't know, I didn't listen." }
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
```
<!-- .element: class="fragment" -->

```rust
struct NonZeroCopy {
    quote: String,
}

struct ZeroCopy<'a> {
    quote: &'a str,
}
```
<!-- .element: class="fragment" -->
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" data-visibility="hidden" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--  Bonus  -->


Partial zero-copy


<img src="uv-beginner-to-advanced-presentation-images/Pasted image 20250323023057.png" alt="" style="object-fit: scale-down">


<!-- .element: class="fragment" -->

```rust
struct NonZeroCopy {
  quote: String,
  a: [u8; 12],
  b: u64,
  c: char,
}

struct PartialZeroCopy<'a> {
  quote: &'a str,
  a: &'a [u8; 12],
  b: u64,
  c: char,
}
```
<!-- .element: class="fragment" -->


Notes:
	- Not all elements can used zero copy
	- "we can't borrow types like `u64` or `char` that have alignment requirements since our buffer might not be properly aligned. We have to immediately parse and store those! Even though we borrowed 42 of the buffer's bytes, we missed out on the last 12 and still had to parse through the buffer to find out where everything is."
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

Total zero-copy



<img src="uv-beginner-to-advanced-presentation-images/Pasted image 20241224024718.png" alt="" style="object-fit: scale-down">


<!-- .element: class="fragment" -->

```rust
struct Example {
  quote: String,
  a: [u8; 12],
  b: u64,
  c: char,
}
```
<!-- .element: class="fragment" -->

Notes:
- Explain if there is time how the buffer pointer is to the beginning of buffer where the struct began
	- Field 1 + 2 - Pointer to the "quote" String, and length, how much bytes to read from this pointer
	- Field 3 - a
	- Field 4 - b
	- FIeld 5 - c
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" data-visibility="hidden" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

<!--  Bonus  -->


- On JSON, first you read the file from disc, then run a parser, and then you grab the contents and put them in the struct. All these operations would get **slower and slower as the data got bigger**
- Instead, the **zero-copy** the operation, doesn't **scale** with our data. No matter how much or how little data we have
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Takeaways

- &shy;<!-- .element: class="fragment" data-fragment-index="1" -->**Blazing Speed**: `uv` delivers swift package management and environment setup
- &shy;<!-- .element: class="fragment" data-fragment-index="2" -->**Innovative Approach**: Focused on speed and efficiency, `uv` redefines Python tooling
- &shy;<!-- .element: class="fragment" data-fragment-index="3" -->**Try It Now**: Explore `uv`'s potential to elevate your Python development
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Questions?

<div class="" style="position: absolute; left: 0%; top: 70%; height: 30%; width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

Yonatan Bitton [@bityob](https://linktr.ee/bityob)
</div>

<div class="" style="position: absolute; left: 60%; top: 70%; height: 30%; width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center" >

<a href="https://linktr.ee/bityob">linktr.ee/bityob</a>
</div>
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Sources 

- Sane Python dependency management with uv ([florianbrand.de](https://florianbrand.de/posts/uv-intro))
- Charlie Marsh (founder of Astral) Presentation on Jane Street ([youtube](https://www.youtube.com/watch?v=gSKTfG1GXYQ&t=3s&ab_channel=JaneStreet))
- uv: Unified Python packaging ([astral.sh](https://astral.sh/blog/uv-unified-python-packaging))
- uv: Python packaging in Rust ([astral.sh](https://astral.sh/blog/uv))
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Learn More (1)

- pip vs. uv: How Streamlit Cloud sped up app load times by 55% ([blog.streamlit.io](https://blog.streamlit.io/content/images/size/w1200/2024/07/_Users_lacosta_Downloads_Announcement-20-3-.svg.png))
- GitHub - `astral-sh/uv`: An extremely fast Python package and project manager, written in Rust ([github](https://github.com/astral-sh/uv))
- Python Packaging is Great Now: `uv` is all you need ([dev.to](https://dev.to/astrojuanlu/python-packaging-is-great-now-uv-is-all-you-need-4i2d))
- Python Packaging Is Good Now (2016) ([blog.glyph.im](https://blog.glyph.im/2016/08/python-packaging.html))
</div></script></section><section  data-markdown><script type="text/template"><!-- .slide: class="drop" -->
<div class="" style="position: absolute; left: 0px; top: 0px; height: 700px; width: 960px; min-height: 700px; display: flex; flex-direction: column; align-items: center; justify-content: center" absolute="true">

### Learn More (2)

- Poetry versus uv ([loopwerk.io](https://www.loopwerk.io/articles/2024/python-uv-revisited/))
- Trying out PDM (and comparing it with Poetry and uv) ([loopwerk.io](https://www.loopwerk.io/articles/2024/trying-pdm/))
- Revisiting uv ([loopwerk.io](https://www.loopwerk.io/articles/2024/python-uv-revisited/))
- How to migrate your Poetry project to uv ([loopwerk.io](https://www.loopwerk.io/articles/2024/migrate-poetry-to-uv/))
- Zero-copy deserialization ([rkyv.org](https://rkyv.org/zero-copy-deserialization.html))
- uv docs ([astral.sh](https://docs.astral.sh/uv/))
- Nice uv cheatsheet ([dev.to](https://dev.to/codemaker2015/introducing-uv-next-gen-python-package-manager-4jbc))
- `uv` version.rs code ([github.com](https://github.com/astral-sh/uv/blob/main/crates/uv-pep440/src/version.rs))
</div></script></section></div>
    </div>

    <script src="dist/reveal.js"></script>

    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/math/math.js"></script>
	<script src="plugin/mermaid/mermaid.js"></script>
	<script src="plugin/chart/chart.min.js"></script>
	<script src="plugin/chart/plugin.js"></script>
	<script src="plugin/customcontrols/plugin.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

	  function isLight(color) {
		let hex = color.replace('#', '');

		// convert #fff => #ffffff
		if(hex.length == 3){
			hex = `${hex[0]}${hex[0]}${hex[1]}${hex[1]}${hex[2]}${hex[2]}`;
		}

		const c_r = parseInt(hex.substr(0, 2), 16);
		const c_g = parseInt(hex.substr(2, 2), 16);
		const c_b = parseInt(hex.substr(4, 2), 16);
		const brightness = ((c_r * 299) + (c_g * 587) + (c_b * 114)) / 1000;
		return brightness > 155;
	}

	var bgColor = getComputedStyle(document.documentElement).getPropertyValue('--r-background-color').trim();
	var isLight = isLight(bgColor);

	if(isLight){
		document.body.classList.add('has-light-background');
	} else {
		document.body.classList.add('has-dark-background');
	}

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealZoom,
          RevealNotes,
          RevealMath.MathJax3,
		  RevealMermaid,
		  RevealChart,
		  RevealCustomControls,
        ],


    	allottedTime: 120 * 1000,

		mathjax3: {
			mathjax: 'plugin/math/mathjax/tex-mml-chtml.js',
		},
		markdown: {
		  gfm: true,
		  mangle: true,
		  pedantic: false,
		  smartLists: false,
		  smartypants: false,
		},

		mermaid: {
			theme: isLight ? 'default' : 'dark',
		},

		customcontrols: {
			controls: [
			]
		},
      };

      // options from URL query string
      var queryOptions = Reveal().getQueryHash() || {};

      var options = extend(defaultOptions, {"width":960,"height":700,"margin":0.04,"controls":true,"progress":true,"slideNumber":false,"transition":"slide","transitionSpeed":"default"}, queryOptions);
    </script>

    <script>
      Reveal.initialize(options);
    </script>
  </body>

  <!-- created with Advanced Slides -->
</html>
